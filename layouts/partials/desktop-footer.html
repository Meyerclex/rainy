
<div id="toggle-theme" class="desktop-icon">
    <img src="/icons/water2.gif">
</div>
<script>
    // Make windows draggable
    const windows = document.querySelectorAll('.window');
    windows.forEach(makeWindowDraggable);

    function makeWindowDraggable(element) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        element.querySelector('.window-title').onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
            bringToFront(element);
        }

        function elementDrag(e) {
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }

    function bringToFront(element) {
        windows.forEach(win => win.style.zIndex = "1"); element.style.zIndex = "2";
    }

    // Window management functions
    function toggleWindow(id) {
        const window = document.getElementById(id);
        if (window.classList.contains('active')) {
            window.classList.remove('active');
        } else {
            window.classList.add('active');
            bringToFront(window);
        }
    }

    function closeWindow(id) {
        document.getElementById(id).classList.remove('active');
    }

    function minimizeWindow(id) {
        const window = document.getElementById(id);
        window.style.transform = 'scale(0.1)';
        setTimeout(() => {
            window.classList.remove('active');
            window.style.transform = 'scale(1)';
        }, 300);
    }

    // Sparkle effect
    function createSparkle(e) {
        const sparkle = document.createElement('div');
        sparkle.style.position = 'fixed';
        sparkle.style.pointerEvents = 'none';
        sparkle.style.left = e.clientX + 'px';
        sparkle.style.top = e.clientY + 'px';
        sparkle.style.animation = 'sparkle 1s linear forwards';
        sparkle.textContent = 'âœ¨';
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 1000);
    }

    document.addEventListener('mousemove', (e) => {
        if (Math.random() < 0.1) createSparkle(e);
    });

    // // Notification system
    // function showNotification(message) {
    //     const notification = document.createElement('div');
    //     notification.className = 'notification';
    //     notification.innerHTML = `
    //         <img src="https://files.catbox.moe/px4tkj.gif" alt="Notification Icon">
    //         <div>
    //             <strong>âœ¨ Notice</strong>
    //             <p>${message}</p>
    //         </div>
    //     `;
    //     document.body.appendChild(notification);
    //     setTimeout(() => {
    //         notification.style.animation = 'slideIn 0.5s ease-out reverse';
    //         setTimeout(() => notification.remove(), 500);
    //     }, 3000);
    // }
    //
    // // Show welcome notification on load
    // window.addEventListener('load', () => {
    //     setTimeout(() => {
    //         showNotification('Welcome to my kawaii space! à«® Ë¶áµ” áµ• áµ”Ë¶ áƒ');
    //     }, 1000);
    // });

    // Music player functionality
    const musicControls = document.querySelectorAll('.music-control');
    let isPlaying = false;

    musicControls.forEach(control => {
        control.addEventListener('click', () => {
            if (control.textContent === 'â–¶') {
                control.textContent = isPlaying ? 'â–¶' : 'â¸';
                isPlaying = !isPlaying;
            }
            control.style.transform = 'scale(0.9)';
            setTimeout(() => control.style.transform = 'scale(1)', 100);
        });
    });

    // Random floating elements
    // function createFloatingElement() {
    //     const elements = ['ðŸŒ¸', 'âœ¨', 'ðŸ’–', 'ðŸŒŸ', 'ðŸŽ€'];
    //     const element = document.createElement('div');
    //     element.style.position = 'fixed';
    //     element.style.left = Math.random() * window.innerWidth + 'px';
    //     element.style.top = window.innerHeight + 'px';
    //     element.style.fontSize = (Math.random() * 20 + 10) + 'px';
    //     element.style.pointerEvents = 'none';
    //     element.style.animation = 'float 3s ease-in-out infinite';
    //     element.textContent = elements[Math.floor(Math.random() * elements.length)];
    //     document.body.appendChild(element);
    //     setTimeout(() => element.remove(), 3000);
    // }
    //
    // setInterval(createFloatingElement, 2000);

    // // Easter egg - click counter
    // let clickCount = 0;
    // document.addEventListener('click', () => {
    //     clickCount++;
    //     if (clickCount === 10) {
    //         showNotification('You found a secret! ðŸŽ‰');
    //         document.body.style.animation = 'rainbow 3s infinite';
    //     }
    // });

    // Add rainbow animation
    const style = document.createElement('style');
    style.textContent = `
            @keyframes rainbow {
                0% { background-color: var(--secondary); }
                33% { background-color: #ffd6ff; }
                66% { background-color: #d6ffff; }
                100% { background-color: var(--secondary); }
            }

            @keyframes sparkle {
                0% { transform: scale(0) rotate(0deg); opacity: 0; }
                50% { transform: scale(1) rotate(180deg); opacity: 1; }
                100% { transform: scale(0) rotate(360deg); opacity: 0; }
            }
        `;
    document.head.appendChild(style);
</script>
<script>
    const themeButton = document.getElementById('toggle-theme');

    themeButton.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');

        // ä¿å­˜ç”¨æˆ·é€‰æ‹©åˆ° localStorage
        if (document.body.classList.contains('dark-mode')) {
            localStorage.setItem('theme', 'dark');
        } else {
            localStorage.setItem('theme', 'light');
        }
    });

    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç”¨æˆ·åå¥½
    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
        }
    });

</script>
